"use strict";(self.webpackChunkseatunnel_website=self.webpackChunkseatunnel_website||[]).push([[61014],{15680:(e,n,t)=>{t.d(n,{xA:()=>u,yg:()=>g});var i=t(96540);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,i,a=function(e,n){if(null==e)return{};var t,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)t=o[i],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)t=o[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=i.createContext({}),d=function(e){var n=i.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},u=function(e){var n=d(e.components);return i.createElement(s.Provider,{value:n},e.children)},m="mdxType",p={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},h=i.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),m=d(t),h=a,g=m["".concat(s,".").concat(h)]||m[h]||p[h]||o;return t?i.createElement(g,r(r({ref:n},u),{},{components:t})):i.createElement(g,r({ref:n},u))}));function g(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,r=new Array(o);r[0]=h;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l[m]="string"==typeof e?e:a,r[1]=l;for(var d=2;d<o;d++)r[d]=t[d];return i.createElement.apply(null,r)}return i.createElement.apply(null,t)}h.displayName="MDXCreateElement"},21573:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>r,default:()=>p,frontMatter:()=>o,metadata:()=>l,toc:()=>d});var i=t(58168),a=(t(96540),t(15680));const o={},r="Embedding",l={unversionedId:"transform-v2/embedding",id:"version-2.3.9/transform-v2/embedding",title:"Embedding",description:"Embedding Transform Plugin",source:"@site/versioned_docs/version-2.3.9/transform-v2/embedding.md",sourceDirName:"transform-v2",slug:"/transform-v2/embedding",permalink:"/docs/2.3.9/transform-v2/embedding",draft:!1,editUrl:"https://github.com/apache/seatunnel-website/edit/main/versioned_docs/version-2.3.9/transform-v2/embedding.md",tags:[],version:"2.3.9",frontMatter:{},sidebar:"docs",previous:{title:"DynamicCompile",permalink:"/docs/2.3.9/transform-v2/dynamic-compile"},next:{title:"FieldMapper",permalink:"/docs/2.3.9/transform-v2/field-mapper"}},s={},d=[{value:"Description",id:"description",level:2},{value:"Options",id:"options",level:2},{value:"model_provider",id:"model_provider",level:3},{value:"api_key",id:"api_key",level:3},{value:"secret_key",id:"secret_key",level:3},{value:"single_vectorized_input_number",id:"single_vectorized_input_number",level:3},{value:"vectorization_fields",id:"vectorization_fields",level:3},{value:"model",id:"model",level:3},{value:"api_path",id:"api_path",level:3},{value:"oauth_path",id:"oauth_path",level:3},{value:"custom_config",id:"custom_config",level:3},{value:"custom_response_parse",id:"custom_response_parse",level:3},{value:"custom_request_headers",id:"custom_request_headers",level:3},{value:"custom_request_body",id:"custom_request_body",level:3},{value:"common options",id:"common-options",level:3},{value:"Example Configuration",id:"example-configuration",level:2},{value:"Customize the embedding model",id:"customize-the-embedding-model",level:3}],u={toc:d},m="wrapper";function p(e){let{components:n,...t}=e;return(0,a.yg)(m,(0,i.A)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,a.yg)("h1",{id:"embedding"},"Embedding"),(0,a.yg)("blockquote",null,(0,a.yg)("p",{parentName:"blockquote"},"Embedding Transform Plugin")),(0,a.yg)("h2",{id:"description"},"Description"),(0,a.yg)("p",null,"The ",(0,a.yg)("inlineCode",{parentName:"p"},"Embedding")," transform plugin leverages embedding models to convert text data into vectorized representations. This\ntransformation can be applied to various fields. The plugin supports multiple model providers and can be integrated with\ndifferent API endpoints."),(0,a.yg)("h2",{id:"options"},"Options"),(0,a.yg)("table",null,(0,a.yg)("thead",{parentName:"table"},(0,a.yg)("tr",{parentName:"thead"},(0,a.yg)("th",{parentName:"tr",align:null},"Name"),(0,a.yg)("th",{parentName:"tr",align:null},"Type"),(0,a.yg)("th",{parentName:"tr",align:null},"Required"),(0,a.yg)("th",{parentName:"tr",align:null},"Default Value"),(0,a.yg)("th",{parentName:"tr",align:null},"Description"))),(0,a.yg)("tbody",{parentName:"table"},(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"model_provider"),(0,a.yg)("td",{parentName:"tr",align:null},"enum"),(0,a.yg)("td",{parentName:"tr",align:null},"yes"),(0,a.yg)("td",{parentName:"tr",align:null},"-"),(0,a.yg)("td",{parentName:"tr",align:null},"The model provider for embedding. Options may include ",(0,a.yg)("inlineCode",{parentName:"td"},"QIANFAN"),", ",(0,a.yg)("inlineCode",{parentName:"td"},"OPENAI"),", etc.")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"api_key"),(0,a.yg)("td",{parentName:"tr",align:null},"string"),(0,a.yg)("td",{parentName:"tr",align:null},"yes"),(0,a.yg)("td",{parentName:"tr",align:null},"-"),(0,a.yg)("td",{parentName:"tr",align:null},"The API key required to authenticate with the embedding service.")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"secret_key"),(0,a.yg)("td",{parentName:"tr",align:null},"string"),(0,a.yg)("td",{parentName:"tr",align:null},"yes"),(0,a.yg)("td",{parentName:"tr",align:null},"-"),(0,a.yg)("td",{parentName:"tr",align:null},"The secret key required for additional authentication with the embedding service.")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"single_vectorized_input_number"),(0,a.yg)("td",{parentName:"tr",align:null},"int"),(0,a.yg)("td",{parentName:"tr",align:null},"no"),(0,a.yg)("td",{parentName:"tr",align:null},"1"),(0,a.yg)("td",{parentName:"tr",align:null},"The number of inputs vectorized in one request. Default is 1.")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"vectorization_fields"),(0,a.yg)("td",{parentName:"tr",align:null},"map"),(0,a.yg)("td",{parentName:"tr",align:null},"yes"),(0,a.yg)("td",{parentName:"tr",align:null},"-"),(0,a.yg)("td",{parentName:"tr",align:null},"A mapping between input fields and their corresponding output vector fields.")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"model"),(0,a.yg)("td",{parentName:"tr",align:null},"string"),(0,a.yg)("td",{parentName:"tr",align:null},"yes"),(0,a.yg)("td",{parentName:"tr",align:null},"-"),(0,a.yg)("td",{parentName:"tr",align:null},"The specific model to use for embedding (e.g: ",(0,a.yg)("inlineCode",{parentName:"td"},"text-embedding-3-small")," for OPENAI).")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"api_path"),(0,a.yg)("td",{parentName:"tr",align:null},"string"),(0,a.yg)("td",{parentName:"tr",align:null},"no"),(0,a.yg)("td",{parentName:"tr",align:null},"-"),(0,a.yg)("td",{parentName:"tr",align:null},"The API endpoint for the embedding service. Typically provided by the model provider.")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"oauth_path"),(0,a.yg)("td",{parentName:"tr",align:null},"string"),(0,a.yg)("td",{parentName:"tr",align:null},"no"),(0,a.yg)("td",{parentName:"tr",align:null},"-"),(0,a.yg)("td",{parentName:"tr",align:null},"The API endpoint for the oauth service.")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"custom_config"),(0,a.yg)("td",{parentName:"tr",align:null},"map"),(0,a.yg)("td",{parentName:"tr",align:null},"no"),(0,a.yg)("td",{parentName:"tr",align:null}),(0,a.yg)("td",{parentName:"tr",align:null},"Custom configurations for the model.")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"custom_response_parse"),(0,a.yg)("td",{parentName:"tr",align:null},"string"),(0,a.yg)("td",{parentName:"tr",align:null},"no"),(0,a.yg)("td",{parentName:"tr",align:null}),(0,a.yg)("td",{parentName:"tr",align:null},"Specifies how to parse the response from the model using JsonPath. Example: ",(0,a.yg)("inlineCode",{parentName:"td"},"$.choices[*].message.content"),".")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"custom_request_headers"),(0,a.yg)("td",{parentName:"tr",align:null},"map"),(0,a.yg)("td",{parentName:"tr",align:null},"no"),(0,a.yg)("td",{parentName:"tr",align:null}),(0,a.yg)("td",{parentName:"tr",align:null},"Custom headers for the request to the model.")),(0,a.yg)("tr",{parentName:"tbody"},(0,a.yg)("td",{parentName:"tr",align:null},"custom_request_body"),(0,a.yg)("td",{parentName:"tr",align:null},"map"),(0,a.yg)("td",{parentName:"tr",align:null},"no"),(0,a.yg)("td",{parentName:"tr",align:null}),(0,a.yg)("td",{parentName:"tr",align:null},"Custom body for the request. Supports placeholders like ",(0,a.yg)("inlineCode",{parentName:"td"},"${model}"),", ",(0,a.yg)("inlineCode",{parentName:"td"},"${input}"),".")))),(0,a.yg)("h3",{id:"model_provider"},"model_provider"),(0,a.yg)("p",null,"The providers for generating embeddings include common options such as ",(0,a.yg)("inlineCode",{parentName:"p"},"DOUBAO"),", ",(0,a.yg)("inlineCode",{parentName:"p"},"QIANFAN"),", and ",(0,a.yg)("inlineCode",{parentName:"p"},"OPENAI"),". Additionally,\nyou can choose ",(0,a.yg)("inlineCode",{parentName:"p"},"CUSTOM")," to implement requests and retrievals for custom embedding models."),(0,a.yg)("h3",{id:"api_key"},"api_key"),(0,a.yg)("p",null,"The API key for authenticating requests to the embedding service. This is typically provided by the model provider when\nyou register for their service."),(0,a.yg)("h3",{id:"secret_key"},"secret_key"),(0,a.yg)("p",null,"The secret key used for additional authentication. Some providers may require this for secure API requests."),(0,a.yg)("h3",{id:"single_vectorized_input_number"},"single_vectorized_input_number"),(0,a.yg)("p",null,"Specifies how many inputs are processed in a single vectorization request. The default is 1. Adjust based on your\nprocessing\ncapacity and the model provider's API limitations."),(0,a.yg)("h3",{id:"vectorization_fields"},"vectorization_fields"),(0,a.yg)("p",null,"A mapping between input fields and their respective output vector fields. This allows the plugin to understand which\ntext fields to vectorize and how to store the resulting vectors."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-hocon"},"vectorization_fields {\n    book_intro_vector = book_intro\n    author_biography_vector  = author_biography\n}\n")),(0,a.yg)("h3",{id:"model"},"model"),(0,a.yg)("p",null,"The specific embedding model to use. This depends on the ",(0,a.yg)("inlineCode",{parentName:"p"},"embedding_model_provider"),". For example, if using OPENAI, you\nmight specify ",(0,a.yg)("inlineCode",{parentName:"p"},"text-embedding-3-small"),"."),(0,a.yg)("h3",{id:"api_path"},"api_path"),(0,a.yg)("p",null,"The API endpoint to use for making requests to the embedding service. This might vary based on the provider and model\nused. Generally, this is provided by the model provider."),(0,a.yg)("h3",{id:"oauth_path"},"oauth_path"),(0,a.yg)("p",null,"The API endpoint for the oauth service. Get certification information. This might vary based on the provider and model\nused. Generally, this is provided by the model provider."),(0,a.yg)("h3",{id:"custom_config"},"custom_config"),(0,a.yg)("p",null,"The ",(0,a.yg)("inlineCode",{parentName:"p"},"custom_config")," option allows you to provide additional custom configurations for the model. This is a map where you\ncan define various settings that might be required by the specific model you're using."),(0,a.yg)("h3",{id:"custom_response_parse"},"custom_response_parse"),(0,a.yg)("p",null,"The ",(0,a.yg)("inlineCode",{parentName:"p"},"custom_response_parse")," option allows you to specify how to parse the model's response. You can use JsonPath to\nextract the specific data you need from the response. For example, by using ",(0,a.yg)("inlineCode",{parentName:"p"},"$.data[*].embedding"),", you can extract\nthe ",(0,a.yg)("inlineCode",{parentName:"p"},"embedding")," field values from the following JSON and obtain a ",(0,a.yg)("inlineCode",{parentName:"p"},"List")," of nested ",(0,a.yg)("inlineCode",{parentName:"p"},"List")," results. For more details on\nusing JsonPath, please refer to\nthe ",(0,a.yg)("a",{parentName:"p",href:"https://github.com/json-path/JsonPath?tab=readme-ov-file#getting-started"},"JsonPath Getting Started guide"),"."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-json"},'{\n  "object": "list",\n  "data": [\n    {\n      "object": "embedding",\n      "index": 0,\n      "embedding": [\n        -0.006929283495992422,\n        -0.005336422007530928,\n        -0.00004547132266452536,\n        -0.024047505110502243\n      ]\n    }\n  ],\n  "model": "text-embedding-3-small",\n  "usage": {\n    "prompt_tokens": 5,\n    "total_tokens": 5\n  }\n}\n')),(0,a.yg)("h3",{id:"custom_request_headers"},"custom_request_headers"),(0,a.yg)("p",null,"The ",(0,a.yg)("inlineCode",{parentName:"p"},"custom_request_headers")," option allows you to define custom headers that should be included in the request sent to\nthe model's API. This is useful if the API requires additional headers beyond the standard ones, such as authorization\ntokens, content types, etc."),(0,a.yg)("h3",{id:"custom_request_body"},"custom_request_body"),(0,a.yg)("p",null,"The ",(0,a.yg)("inlineCode",{parentName:"p"},"custom_request_body")," option supports placeholders:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"${model}"),": Placeholder for the model name."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"${input}"),": Placeholder to determine input value and define request body request type based on the type of body\nvalue. Example: ",(0,a.yg)("inlineCode",{parentName:"li"},'["${input}"]')," -> ",'["input"]'," (list)")),(0,a.yg)("h3",{id:"common-options"},"common options"),(0,a.yg)("p",null,"Transform plugin common parameters, please refer to ",(0,a.yg)("a",{parentName:"p",href:"/docs/2.3.9/transform-v2/common-options"},"Transform Plugin")," for details."),(0,a.yg)("h2",{id:"example-configuration"},"Example Configuration"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-hocon"},'env {\n  job.mode = "BATCH"\n}\n\nsource {\n  FakeSource {\n    row.num = 5\n    schema = {\n      fields {\n        book_id = "int"\n        book_name = "string"\n        book_intro = "string"\n        author_biography = "string"\n      }\n    }\n    rows = [\n      {fields = [1, "To Kill a Mockingbird",\n      "Set in the American South during the 1930s, To Kill a Mockingbird tells the story of young Scout Finch and her brother, Jem, who are growing up in a world of racial inequality and injustice. Their father, Atticus Finch, is a lawyer who defends a black man falsely accused of raping a white woman, teaching his children valuable lessons about morality, courage, and empathy.",\n      "Harper Lee (1926\u20132016) was an American novelist best known for To Kill a Mockingbird, which won the Pulitzer Prize in 1961. Lee was born in Monroeville, Alabama, and the town served as inspiration for the fictional Maycomb in her novel. Despite the success of her book, Lee remained a private person and published only one other novel, Go Set a Watchman, which was written before To Kill a Mockingbird but released in 2015 as a sequel."\n      ], kind = INSERT}\n      {fields = [2, "1984",\n      "1984 is a dystopian novel set in a totalitarian society governed by Big Brother. The story follows Winston Smith, a man who works for the Party rewriting history. Winston begins to question the Party\u2019s control and seeks truth and freedom in a society where individuality is crushed. The novel explores themes of surveillance, propaganda, and the loss of personal autonomy.",\n      "George Orwell (1903\u20131950) was the pen name of Eric Arthur Blair, an English novelist, essayist, journalist, and critic. Orwell is best known for his works 1984 and Animal Farm, both of which are critiques of totalitarian regimes. His writing is characterized by lucid prose, awareness of social injustice, opposition to totalitarianism, and support of democratic socialism. Orwell\u2019s work remains influential, and his ideas have shaped contemporary discussions on politics and society."\n      ], kind = INSERT}\n      {fields = [3, "Pride and Prejudice",\n      "Pride and Prejudice is a romantic novel that explores the complex relationships between different social classes in early 19th century England. The story centers on Elizabeth Bennet, a young woman with strong opinions, and Mr. Darcy, a wealthy but reserved gentleman. The novel deals with themes of love, marriage, and societal expectations, offering keen insights into human behavior.",\n      "Jane Austen (1775\u20131817) was an English novelist known for her sharp social commentary and keen observations of the British landed gentry. Her works, including Sense and Sensibility, Emma, and Pride and Prejudice, are celebrated for their wit, realism, and biting critique of the social class structure of her time. Despite her relatively modest life, Austen\u2019s novels have gained immense popularity, and she is considered one of the greatest novelists in the English language."\n      ], kind = INSERT}\n      {fields = [4, "The Great GatsbyThe Great Gatsby",\n      "The Great Gatsby is a novel about the American Dream and the disillusionment that can come with it. Set in the 1920s, the story follows Nick Carraway as he becomes entangled in the lives of his mysterious neighbor, Jay Gatsby, and the wealthy elite of Long Island. Gatsby\'s obsession with the beautiful Daisy Buchanan drives the narrative, exploring themes of wealth, love, and the decay of the American Dream.",\n      "F. Scott Fitzgerald (1896\u20131940) was an American novelist and short story writer, widely regarded as one of the greatest American writers of the 20th century. Born in St. Paul, Minnesota, Fitzgerald is best known for his novel The Great Gatsby, which is often considered the quintessential work of the Jazz Age. His works often explore themes of youth, wealth, and the American Dream, reflecting the turbulence and excesses of the 1920s."\n      ], kind = INSERT}\n      {fields = [5, "Moby-Dick",\n      "Moby-Dick is an epic tale of obsession and revenge. The novel follows the journey of Captain Ahab, who is on a relentless quest to kill the white whale, Moby Dick, that once maimed him. Narrated by Ishmael, a sailor aboard Ahab\u2019s ship, the story delves into themes of fate, humanity, and the struggle between man and nature. The novel is also rich with symbolism and philosophical musings.",\n      "Herman Melville (1819\u20131891) was an American novelist, short story writer, and poet of the American Renaissance period. Born in New York City, Melville gained initial fame with novels such as Typee and Omoo, but it was Moby-Dick, published in 1851, that would later be recognized as his masterpiece. Melville\u2019s work is known for its complexity, symbolism, and exploration of themes such as man\u2019s place in the universe, the nature of evil, and the quest for meaning. Despite facing financial difficulties and critical neglect during his lifetime, Melville\u2019s reputation soared posthumously, and he is now considered one of the great American authors."\n      ], kind = INSERT}\n    ]\n    plugin_output = "fake"\n  }\n}\n\ntransform {\n  Embedding {\n    plugin_input = "fake"\n    embedding_model_provider = QIANFAN\n    model = bge_large_en\n    api_key = xxxxxxxxxx\n    secret_key = xxxxxxxxxx\n    api_path = xxxxxxxxxx\n    vectorization_fields {\n        book_intro_vector = book_intro\n        author_biography_vector  = author_biography\n    }\n    plugin_output = "embedding_output"\n  }\n}\n\nsink {\n  Assert {\n      plugin_input = "embedding_output"\n      rules =\n        {\n          field_rules = [\n            {\n              field_name = book_id\n              field_type = int\n              field_value = [\n                {\n                  rule_type = NOT_NULL\n                }\n              ]\n            },\n            {\n              field_name = book_name\n              field_type = string\n              field_value = [\n                {\n                  rule_type = NOT_NULL\n                }\n              ]\n            },\n            {\n              field_name = book_intro\n              field_type = string\n              field_value = [\n                {\n                  rule_type = NOT_NULL\n                }\n              ]\n            },\n            {\n              field_name = author_biography\n              field_type = string\n              field_value = [\n                {\n                  rule_type = NOT_NULL\n                }\n              ]\n            },\n            {\n              field_name = book_intro_vector\n              field_type = float_vector\n              field_value = [\n                {\n                  rule_type = NOT_NULL\n                }\n              ]\n            },\n            {\n              field_name = author_biography_vector\n              field_type = float_vector\n              field_value = [\n                {\n                  rule_type = NOT_NULL\n                }\n              ]\n            }\n          ]\n        }\n    }\n}\n')),(0,a.yg)("h3",{id:"customize-the-embedding-model"},"Customize the embedding model"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-hocon"},'\nenv {\n  job.mode = "BATCH"\n}\n\nsource {\n  FakeSource {\n    row.num = 5\n    schema = {\n      fields {\n        book_id = "int"\n        book_name = "string"\n        book_intro = "string"\n        author_biography = "string"\n      }\n    }\n    rows = [\n      {fields = [1, "To Kill a Mockingbird",\n      "Set in the American South during the 1930s, To Kill a Mockingbird tells the story of young Scout Finch and her brother, Jem, who are growing up in a world of racial inequality and injustice. Their father, Atticus Finch, is a lawyer who defends a black man falsely accused of raping a white woman, teaching his children valuable lessons about morality, courage, and empathy.",\n      "Harper Lee (1926\u20132016) was an American novelist best known for To Kill a Mockingbird, which won the Pulitzer Prize in 1961. Lee was born in Monroeville, Alabama, and the town served as inspiration for the fictional Maycomb in her novel. Despite the success of her book, Lee remained a private person and published only one other novel, Go Set a Watchman, which was written before To Kill a Mockingbird but released in 2015 as a sequel."\n      ], kind = INSERT}\n      {fields = [2, "1984",\n      "1984 is a dystopian novel set in a totalitarian society governed by Big Brother. The story follows Winston Smith, a man who works for the Party rewriting history. Winston begins to question the Party\u2019s control and seeks truth and freedom in a society where individuality is crushed. The novel explores themes of surveillance, propaganda, and the loss of personal autonomy.",\n      "George Orwell (1903\u20131950) was the pen name of Eric Arthur Blair, an English novelist, essayist, journalist, and critic. Orwell is best known for his works 1984 and Animal Farm, both of which are critiques of totalitarian regimes. His writing is characterized by lucid prose, awareness of social injustice, opposition to totalitarianism, and support of democratic socialism. Orwell\u2019s work remains influential, and his ideas have shaped contemporary discussions on politics and society."\n      ], kind = INSERT}\n      {fields = [3, "Pride and Prejudice",\n      "Pride and Prejudice is a romantic novel that explores the complex relationships between different social classes in early 19th century England. The story centers on Elizabeth Bennet, a young woman with strong opinions, and Mr. Darcy, a wealthy but reserved gentleman. The novel deals with themes of love, marriage, and societal expectations, offering keen insights into human behavior.",\n      "Jane Austen (1775\u20131817) was an English novelist known for her sharp social commentary and keen observations of the British landed gentry. Her works, including Sense and Sensibility, Emma, and Pride and Prejudice, are celebrated for their wit, realism, and biting critique of the social class structure of her time. Despite her relatively modest life, Austen\u2019s novels have gained immense popularity, and she is considered one of the greatest novelists in the English language."\n      ], kind = INSERT}\n      {fields = [4, "The Great GatsbyThe Great Gatsby",\n      "The Great Gatsby is a novel about the American Dream and the disillusionment that can come with it. Set in the 1920s, the story follows Nick Carraway as he becomes entangled in the lives of his mysterious neighbor, Jay Gatsby, and the wealthy elite of Long Island. Gatsby\'s obsession with the beautiful Daisy Buchanan drives the narrative, exploring themes of wealth, love, and the decay of the American Dream.",\n      "F. Scott Fitzgerald (1896\u20131940) was an American novelist and short story writer, widely regarded as one of the greatest American writers of the 20th century. Born in St. Paul, Minnesota, Fitzgerald is best known for his novel The Great Gatsby, which is often considered the quintessential work of the Jazz Age. His works often explore themes of youth, wealth, and the American Dream, reflecting the turbulence and excesses of the 1920s."\n      ], kind = INSERT}\n      {fields = [5, "Moby-Dick",\n      "Moby-Dick is an epic tale of obsession and revenge. The novel follows the journey of Captain Ahab, who is on a relentless quest to kill the white whale, Moby Dick, that once maimed him. Narrated by Ishmael, a sailor aboard Ahab\u2019s ship, the story delves into themes of fate, humanity, and the struggle between man and nature. The novel is also rich with symbolism and philosophical musings.",\n      "Herman Melville (1819\u20131891) was an American novelist, short story writer, and poet of the American Renaissance period. Born in New York City, Melville gained initial fame with novels such as Typee and Omoo, but it was Moby-Dick, published in 1851, that would later be recognized as his masterpiece. Melville\u2019s work is known for its complexity, symbolism, and exploration of themes such as man\u2019s place in the universe, the nature of evil, and the quest for meaning. Despite facing financial difficulties and critical neglect during his lifetime, Melville\u2019s reputation soared posthumously, and he is now considered one of the great American authors."\n      ], kind = INSERT}\n    ]\n    plugin_output = "fake"\n  }\n}\n\ntransform {\n Embedding {\n    plugin_input = "fake"\n    model_provider = CUSTOM\n    model = text-embedding-3-small\n    api_key = xxxxxxxx\n    api_path = "http://mockserver:1080/v1/doubao/embedding"\n    single_vectorized_input_number = 2\n    vectorization_fields {\n        book_intro_vector = book_intro\n        author_biography_vector  = author_biography\n    }\n    custom_config={\n        custom_response_parse = "$.data[*].embedding"\n        custom_request_headers = {\n            "Content-Type"= "application/json"\n            "Authorization"= "Bearer xxxxxxx\n        }\n        custom_request_body ={\n            modelx = "${model}"\n            inputx = ["${input}"]\n        }\n    }\n    plugin_output = "embedding_output_1"\n  }\n}\n\nsink {\n  Assert {\n      plugin_input = "embedding_output_1"\n      rules =\n        {\n          field_rules = [\n            {\n              field_name = book_id\n              field_type = int\n              field_value = [\n                {\n                  rule_type = NOT_NULL\n                }\n              ]\n            },\n            {\n              field_name = book_name\n              field_type = string\n              field_value = [\n                {\n                  rule_type = NOT_NULL\n                }\n              ]\n            },\n            {\n              field_name = book_intro\n              field_type = string\n              field_value = [\n                {\n                  rule_type = NOT_NULL\n                }\n              ]\n            },\n            {\n              field_name = author_biography\n              field_type = string\n              field_value = [\n                {\n                  rule_type = NOT_NULL\n                }\n              ]\n            },\n            {\n              field_name = book_intro_vector\n              field_type = float_vector\n              field_value = [\n                {\n                  rule_type = NOT_NULL\n                }\n              ]\n            },\n            {\n              field_name = author_biography_vector\n              field_type = float_vector\n              field_value = [\n                {\n                  rule_type = NOT_NULL\n                }\n              ]\n            }\n          ]\n        }\n    }\n}\n\n')))}p.isMDXComponent=!0}}]);